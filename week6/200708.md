200708_TIL
===

5주차에 과제를 하며, 꽤 TDD의 의도를 이해했고 그대로 잘 과제를 했다고 생각했는데, 여전히 과제를 하면서는 나의 TDD 과정에 확신을 갖지 못했다. 한참, 흐름에 맞게 하다가 갑자기 까먹고 있었던 테스트 코드를 왕창 추가했고 '내가 맞게 하고 있나?'라는 갑작스런 불안감에 결국 멘토님께 질문을 남겼다.

그리고, 멘토님은 글 하나를 올려 주셨고, 그 글을 읽으며 많은 생각을 하고 돌아보게 되었다. 그 중 이 두 개의 문장이 정말 기억에 많이 남았다.

> TDD는 우리의 예상과 다른 부분이 있음을 인지하는 시점을 미래에서 현재로 바꿔준다. 이게 가능한 이유는 테스트 코드 자체가 구현할 기능을 사용하는 최초의 클라이언트이기 때문이다.

나는 왜 TDD를 배우고 싶었을까?
---

사실, 처음에는 어쩌다 주워들은 TDD를 보고 그냥 멋진 개발방법론 같아서 배우고 싶었다. 테스트 코드를 작성해본 경험도 없는데, TDD로 바로 관심을 갖게 된 게 지금 생각하면 조금 아이러니하기도 하다. 막연한 생각으로 나도 언젠가는 테스트 주도 개발을 하는 개발자가 되고 싶다고 생각을 하다가, 코드숨을 통해 꼭 배워야겠다고 생각한 확실한 계기가 생겨버렸다.

나는 나에게 틀렸다고 말해줄 '누군가'가 간절하게 필요했던 거 같다. 막상, 앱을 만들어 냈는데, 나는 어디서 어떤 오류가 날지 몰랐다. 오류의 원인을 찾는 것도 한참 걸리고, 마치 모래성과 같이 언제 무너질까 조마조마했다. 그래서, 사람들이 쓰라고 만든 앱인데, 누군가가 쓰지 않기를 간절하게 (?) 바라는 지경까지 되고 말았다.

그래서 나는 나 외에 누군가가 이 앱을 쓰기 전에, 먼저 잘못된 것을 빨리 찾아낼 방법을 찾고 싶었다. 그리고 이왕이면 '아이폰 에뮬레이터를 켜서 하나하나 작동시키는' 번거로운 방법보다 훨씬 더 효율적이고 강력한 방법을 찾기를 원하고 있었다.

테스트주도개발이라는 것이 내가 가지고 있는 문제 해결의 방법이 될 수 있다는 것을 깨닫고, 켄트 벡의 TDD by example 책도 사고 flutter TDD 코스도 들락날락 거렸지만, 스스로 이해하기에는 너무 버겁고 힘들었다. 혼자 힘으로 하는 것에 한계를 느껴서 이렇게 코드숨을 신청하게 된 것이다.

방법은 본질을 돕기위한 도구이다. 본질을 보려고 노력해도 때로는 눈에 쉽게 보이는 방법에만 집중하게 되는 거 같다. 앞으로는 '내가 TDD의 순서를 지켰는가?'라는 질문보다, 'TDD를 통해 내가 가진 문제를 해결했을까?'라는 질문을 스스로에게 던져야겠다고 생각했다. 

그렇다면, 지금 이 시점에서 스스로에게 이 질문을 던진다면 나는 어떻게 대답할까? 지금 이 순간에는 '그렇다'라고 대답할 거 같다. TDD를 시작하자, 확실히 이전 몇주차보다 코드를 작성하는데 망설이는 시간이 훨씬 줄어들었다. 나의 의도대로 완벽하게 동작하는 소프트웨어를 만들어야 한다는 책임을, TDD를 시작한 이후로는 테스트에게 열심히 떠넘기고 있다.

또, TDD의 강력함을 느끼고, 이제 내가 개발하고 있는 앱의 구조를 뜯어고치고 있다. 나의 가장 든든한 클라이언트를 모시기 위한 준비작업(?)인 셈이다. 그 과정에서, 코드숨에서 배운 것을 생각하며, '이건 mocking이 가능할까?', '외부에 의존적이지는 않을까?'라는 끊임 없는 질문을 하면서 리팩터링을 진행하고 있다. 

아직 flutter에는 어떤 matcher가 있는지, function은 어떻게 mocking하는지 하나도 모르지만, 꼭 올해 안에는 flutter로 TDD를 시작하고 싶다는 목표가 생겼다. 내가 짊어져야 할 에러들에 대한 부담감과 책임감을 테스트코드가 같이 짊어줘졌으면 좋겠다. 그리고, 이 과정을 통해 내가 만든 소프트웨어를 누군가 사용하는 것을 보고 두려움보다는 뿌듯함을 느낄 수 있게 되었으면 좋겠다.
